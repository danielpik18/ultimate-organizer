<div class="wrapper">
  <app-click-preventer *ngIf="creatingTaskMode"></app-click-preventer>

  <div class="container">
    <div class="row">
      <div class="col col-4">
        <app-todo-categories></app-todo-categories>
      </div>

      <div class="col col-8 todosWrapper customScrollbar customScrollbar__1">
        <app-loading-wheel *ngIf="!todos"></app-loading-wheel>

        <div *ngIf="creatingTaskMode" class="createTaskDarkBg"></div>

        <div *ngIf="todos" class="doubleClickTip">
          <i class="fas fa-mouse mr-2"></i>
          <span>Double-click on a task to edit</span>
        </div>

        <!--Tasks list-->
        <ul #todoList>

          <!--New todo-->
          <app-create-todo
            *ngIf="creatingTaskMode"
            (onClickAway)="enableNewTaskClickAway && toggleDiscardNewTaskModal();"
          >
          </app-create-todo>
          <!---->

          <li *ngFor="let todo of todos" id="task_{{todo.id}}" [ngClass]="creatingTaskMode && 'taskItem--blur'">
            <app-todo
              taskId="{{todo.id}}"
              title='{{todo.title}}'
              completionDate='{{todo.completion_date}}'
              priority='{{todo.priority}}'
              todoState='{{todo.state}}'
              (onRemoveTaskButtonClick)="toggleDeleteModal($event)"
            >
            </app-todo>
          </li>

        </ul>
        <!---->

        <div class="createTaskButton" (click)="toggleCreatingTaskMode('on')">
          <i class="fas fa-plus-circle"></i>
        </div>

        <app-filter-data-button
          (onFilterChange)="filterData($event)"
          [filterOptions]="['completed', 'overtime', 'pending']"
          defaultFilter='completed'
        >
        </app-filter-data-button>
      </div>
    </div>
  </div>
</div>

<!--Remove task modal-->
<app-basic-modal
  *ngIf="showDeleteModal"
  modalWidth="40%"
  modalHeight="36%"
  (onBackdropClick)="toggleDeleteModal()"
>
  <app-confirmation-modal
    title="Would you like to delete this item?"
    (onCancel)="toggleDeleteModal()"
  >
  </app-confirmation-modal>
</app-basic-modal>
<!---->

<!--Discard new task modal-->
<app-basic-modal
  *ngIf="showDiscardNewTaskModal"
  modalWidth="40%"
  modalHeight="36%"
  (onBackdropClick)="toggleDiscardNewTaskModal();"
>
  <app-confirmation-modal
    title="Discard new task?"
    (onCancel)="toggleDiscardNewTaskModal();"
    (onConfirm)="toggleDiscardNewTaskModal(); toggleCreatingTaskMode('off');"
  >
  </app-confirmation-modal>
</app-basic-modal>
<!---->

